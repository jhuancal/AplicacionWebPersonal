<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Panel de Administración - SuperPet{% endblock %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Bootstrap CSS (Needed for Modal/Table in User's template) -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <style>
        /* Base Styles from Dashboard */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            display: flex;
            height: 100vh;
            background-color: #f4f4f4;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: #191919;
            color: #fff;
            display: flex;
            flex-direction: column;
            padding: 20px;
            position: fixed;
            /* Fix sidebar */
            height: 100%;
        }

        .sidebar .logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 40px;
            text-align: center;
            color: #b40500;
        }

        .sidebar nav ul {
            list-style: none;
            padding-left: 0;
            /* Reset UL padding */
        }

        .sidebar nav ul li {
            margin-bottom: 15px;
        }

        .sidebar nav ul li a {
            color: #ccc;
            text-decoration: none;
            font-size: 16px;
            display: block;
            padding: 10px;
            border-radius: 5px;
            transition: 0.3s;
        }

        .sidebar nav ul li a:hover,
        .sidebar nav ul li a.active,
        .sidebar nav ul li a[aria-expanded="true"] {
            background-color: #333;
            color: #fff;
            border-left: 4px solid #b40500;
        }

        .sidebar nav ul li a.menu-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #aaa;
            border-left: 4px solid transparent;
            /* Maintain spacing alignment */
        }

        /* Arrow rotation */
        .sidebar .arrow {
            transition: transform 0.3s;
            font-size: 10px;
        }

        .sidebar a[aria-expanded="true"] .arrow {
            transform: rotate(90deg);
        }

        /* Submenu Indentation */
        .sidebar .submenu li a {
            padding-left: 40px;
            font-size: 14px;
            background-color: #111;
        }

        .sidebar nav ul li a.disabled {
            color: #444;
            pointer-events: none;
        }

        /* Main Content wrapper to offset fixed sidebar */
        .wrapper {
            margin-left: 250px;
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header .user-info {
            font-weight: 500;
        }

        header .logout {
            color: #b40500;
            text-decoration: none;
            font-weight: bold;
        }

        /* Dashboard Content */
        .content {
            padding: 40px;
            flex: 1;
            overflow-y: auto;
        }

        /* Helper Classes for the Template provided */
        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .text-left {
            text-align: left;
        }

        .mr-1 {
            margin-right: 5px;
        }

        .ml-3 {
            margin-left: 15px;
        }

        .d-inline-block {
            display: inline-block;
        }

        .w-100 {
            width: 100%;
        }

        .mb-0 {
            margin-bottom: 0;
        }

        /* Modal Styles fix for bootstrap 3 compatibility with flex body */
        .modal {
            display: none;
        }
    </style>
    {% block styles %}
    {% endblock %}

</head>

<body>

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">SuperPet Admin</div>
        <nav>
            <ul id="main-menu">
                <li>
                    <a href="/admin/dashboard" class="{{ 'active' if request.path == '/admin/dashboard' else '' }}">
                        <i class="fa fa-home"></i> Inicio
                    </a>
                </li>
                <li>
                    <a href="/admin/estructuras" class="{{ 'active' if request.path == '/admin/estructuras' else '' }}">
                        <i class="fa fa-home"></i> Estructuras
                    </a>
                </li>
                <li>
                    <a href="/admin/funciones" class="{{ 'active' if request.path == '/admin/funciones' else '' }}">
                        <i class="fa fa-home"></i> Funciones
                    </a>
                </li>
                <li>
                    <a href="/admin/selectores" class="{{ 'active' if request.path == '/admin/selectores' else '' }}">
                        <i class="fa fa-home"></i> Selectores
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <div class="wrapper">
        <header>
            <div class="user-info">Bienvenido, {{ session['user'] if session.get('user') else 'Admin' }}</div>
            <a href="/logout" class="logout">Cerrar Sesión</a>
        </header>

        <div class="content">
            {% block content %}
            {% endblock %}
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.5.2/bootbox.min.js"></script>
    <!-- Noty or similar notification library if needed, mimicking standard alerts for now if library missing -->
    <script>
        function Noty(type, title, message) {
            alert(title + ": " + message);
        }
        function fload(action) {
            if (action === 'show') console.log("Loading...");
            else console.log("Loaded.");
        }
        // Generic Ajax helper to match the template's expected signature if possible
        function callAjax(data, url, method) {
            return $.ajax({
                url: url,
                type: method,
                contentType: 'application/json',
                data: JSON.stringify(data)
            });
        }
        // Helper for Nro
        function getNro(index) { return index + 1; }
    </script>
    {% block scripts %}
    {% endblock %}
</body>

</html>